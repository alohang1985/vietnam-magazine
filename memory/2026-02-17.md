# Durable memory snapshot — 2026-02-17

Timestamp: 2026-02-17 (session snapshot created before compaction)

Summary of important state and decisions from the session:

- Project: JARVIS Trading Dashboard / Bithumb MVP
- Key file locations (edited/used):
  - backend: /Users/youngdonjang/.openclaw/workspace/dashboard-api/server.js
  - frontend: /Users/youngdonjang/.openclaw/workspace/dashboard-ui
  - frontend CSS backup(s): src/index.css.bak, src/index.css.bak2, src/index.css.bak3
  - paper_trader: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/paper_trader.py
  - price_feeder: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/price_feeder.py
  - data CSVs: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/data/*_1m.csv (headers fixed to include timestamp,close)
  - trades log: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/paper_trades.csv
  - trade backups: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/paper_trades.csv.orig.*.bak and paper_trades.csv.full_reset_backup.*.bak
  - rebuild audit: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/rebuild_audit.txt
  - frontend serve log: /Users/youngdonjang/.openclaw/workspace/dashboard-ui/serve.log
  - paper_trader runtime log: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/paper_trader_run.log

- Actions taken (high level):
  - Fixed CSV header issues for price CSVs (prepended 'timestamp,close').
  - Made paper_trader defensive for malformed CSV rows; added DCA tracking and avg_entry calculations.
  - Updated server.js.updatePositionsCache to compute positions directly from trades CSV and to produce numeric lastPrice/unrealized values.
  - Cleaned trade log to remove RESET rows; multiple backups created before edits.
  - Rebuilt frontend with new global CSS (user-provided). Built artifacts in dashboard-ui/build and served locally at http://localhost:3000 using npx serve. Multiple CSS replacements and backups were created.
  - Implemented a "Rebuild positions from last RESET" flow; performed a rebuild attempt which resulted in header-only file due to timestamp mismatch; original file was preserved as backup.
  - Per user request performed a full reset: backed up trades, called POST /api/reset_initial_cash (initialCash=20000000), restarted paper_trader under the project's venv in background; new BUY logs observed and paper_trader ran (nohup) with PID 56651. Later observed SIGTERM events; assisted to plan cleanup/restart.

- Current runtime state (as of snapshot):
  - dashboard-api running on port 4000; WebSocket attempted on 4001 but previously had EADDRINUSE errors (needs resolution).
  - frontend static server running at http://localhost:3000 (serve PID 57033).
  - paper_trader restarted after full reset; background run PID 56651; logs in paper_trader_run.log. Some SIGTERM exits observed; may have duplicate instances.
  - price_feeder still has dependency issues historically (requests/websocket-client missing in venv); pending stabilization.

- Decisions / preferences captured:
  - Keep paper_trader in paper mode; preserve trade logs and create backups before destructive edits.
  - Prefer pm2 (or equivalent) process management for persistence, but pm2 not available in current PATH; manual management used as fallback.
  - Avoid hardcoding live API keys in frontend.
  - Use defensive parsing for CSV and trades to avoid IndexError and malformed rows.

- Next recommended actions (user-approved choices pending):
  1. Resolve WS port conflict: find and kill process binding 4001, restart dashboard-api (prefer under pm2).
  2. Stabilize price_feeder: install required packages in venv and run under pm2 or supervised service.
  3. Re-register services under pm2 for auto-restart and log rotation.
  4. Optionally expose trader positions via positions.json or small HTTP endpoint for robust server sync.

- References / evidence paths:
  - server run log: /Users/youngdonjang/.openclaw/workspace/dashboard-api/server.run.log
  - trades backup used for full reset: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/paper_trades.csv.full_reset_backup.20260218011834
  - original trades pre-rebuild: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/paper_trades.csv.pre_rebuild.20260217181630.bak
  - rebuild audit file: /Users/youngdonjang/.openclaw/workspace/bithumb_mvp/logs/rebuild_audit.txt

Stored-by: JARVIS (assistant) — durable snapshot for pre-compaction recall.
